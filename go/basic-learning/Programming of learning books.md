# xsw 



## Chapter One 

### Go语言主要特性

* 自动垃圾回收：所有内存分配动作及内存使用都会被记录，并对所有已分配的内存进行跟踪检测，当有些内存没有被使用时就进行阶段性地回收（CPU相对空闲的时候）
* 更丰富的内置类型：简单的（比如整型和浮点型）、C#和Java中数组和字符串、map字典类型、slice数组切片(切片属性：开始位置、长度、最大长度|切片：引用类型)
* 函数多返回值
* 错误处理（可大量减少代码）：defer,panic,recover
* 匿名函数和闭包：所有函数也为值类型，可作参数传递
* 类型和接口：可以不用声明关系直接转换
* 并发编程：goroutine概念（普通函数或方法，通过关键字go启动新的goroutine），通过channel可方便进行跨goroutine通信
* 反射
* 语言交互性：Cgo

### go程序

* hello.go

  ```go
  package main
  import "fmt"
  func main( ) {
      fmt.Println("Hello,world.你好，世界！")
  }
  ```

* 代码解读

  1.package声明：Go代码所属的包（包：最基本的分发单位）

  2.生成可执行程序，必须建立main，并在该包中包含main( )的函数

  3.命令行传入的参数在os.Args变量中保存（os包以跨平台的方式提供与操作系统交互的函数和变量）

  4.flag包用于支持命令行开关

  5.包声明是一系列import语句，用于导入该程序所依赖的包。例：Println( )所属的包是fmt包

  6.强制左花括号{，以及一些函数名的大小写规则

  7.Go函数以关键字func开头

  ```go
  func 函数名(参数列表)(返回值列表){
      //函数体
  }
  ```

  8.并不是所有返回值都必须赋值，没有被明确赋值的返回值会被设置默认值（例：result会被设为0.0，err会被设为nil）

  9.注释

  ```go
  //注释
  /*注释*/
  ```

* 问题追踪和调试：打印日志（log包）、GDB逐步调试

 ## Chapter Two

### 变量：关键字var，不需要分号为结束符

* ```go
  var {变量名称} {变量类型}
  ```

* 变量初始化：":="用于明确表达同时进行声明和初始化的工作，":="左侧的变量不可是已被声明的

  ```go
  //指定变量类型且相对赋值，完整声明+初始化
  var {变量名} {变量类型} = {变量值}
  var v1 int = 10 
  //提供初始化值，可省略变量类型
  var {变量名} = {变量值}
  var v2 = 10    
  //适用于局部变量
  {变量名} := {变量值}
  v3 := 10       
  ```

* 变量赋值：支持多重赋值功能（第三行）

  ```go 
  var v10 int  
  v10 = 526    //赋值
  i,j = j,i
  ```

* 匿名变量"_"特殊变量名，任何赋予它的值都会被丢弃

  ```go
  _,_,nickName := GetName( )
  ```

### 常量：已知不可改变的值

* ```go
  const {常量名} {常量类型} 或 const {常量名} = {常量值}
  ```

* 字面常量(literal)

  ```go
  526     //整型
  3.1415  //浮点型
  5.2+6i  //复数类型
  true    //布尔类型
  "foo"   //字符串类型
  ```

* 常量定义：关键字const，常量或常量表达式

* 预定义常量：true,false是布尔类型，而iota是自增常量

* iota：从0开始取值每出现一次，自身值加1，在每一个const出现时被重置为0

* 常量赋值例子

  ```go
  //定义年龄
  const age int = 27
  //定义姓名及年龄（方法一）
  const(
       name = "yuyan"
       age = 27
  )
  //定义姓名及年龄（方法二）
  const name,age = "yuyan",27
  //定义年龄及身高
  const age,height int = 27,172
  ```

* 枚举:一系列相关的常量

  ```go
  const (
      Sunday = iota
      Monday
      Tuesday
      Wednesday
      Thursday
      Friday
      Saturday       //以大写字母开头的常量在包外可见，可被其他包访问
      numberOfDays   //此常量没有导出，以小写字母开头的常量为包内私有
  )
  ```

### 类型

#### 整型：有符号整型和无符号整型

* ```go
  {符号位}{数字位置}
  ```

* |        | 类型   | 长度（字节数）          | 值的范围        |
  | :----: | ------ | ----------------------- | --------------- |
  | 有符号 | int    | 32位平台为4/64位平台为8 | int32/int64     |
  |        | int8   | 1                       | -128~127        |
  |        | int16  | 2                       | -32768~32678    |
  | 无符号 | uint   | 32位平台为4/64位平台为8 | uint32/uint64   |
  |        | uint8  | 1                       | 0~255(2^8-1)    |
  |        | uint16 | 2                       | 0~65535(2^16-1) |

* 不同类型的整型无法相互赋值，需类型转换，有的转换会丢失准确性

* %求余、^x取反、x ^ y异或

#### 浮点型：包含小数点的数据

* ```go
  {符号位}{指数位}{有效数字位}
  ```

  符号位：浮点数的正负性，在最高位，0正1负

  指数位：浮点数的数量级，带符号的整数，长度通常为 8 或 11 位

  有效数字位：浮点数的精度，带符号的小数

* float32相当于C的float类型，float64相当于C的double类型

  ```go
  var fvalue1 float32
  fvalue1 = 12
  fvalue2  := 12.0 //加小数点才会被推导为浮点型，将自动设为float64
  
  //强制类型转换
  fvalue1 = float32(fvalue2)
  ```

* 浮点数比较

  ```go
  import "math" 
  // p为用户自定义的比较精度，比如0.00001
  func IsEqua1(f1,f2,p float64) bool {
      return math.Fdim(f1, f2) < p
  }
  ```

#### 布尔型：关键字bool，true和false，只占用1bit，通常用于判断语句

```go
var v1 bool
v1 = true
v2 := (1 == 2) //v2也会被推导为bool类型
```

#### 复数:实部+虚部

``` 
var value1 complex64 //由2个float32构成的复数结构

value1 = 5.2 + 6i
value2 := 5.2 + 6i //value2是complex128类型
value3 := complex(5,2, 6i) //同2
```











